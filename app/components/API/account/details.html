<div class="col-sm-12">
    <div class="row">
        <div class="col-sm-8 col-sm-offset-2">
            <h1 class="text-center no-vertical-margin">{{ account.owner.full_name }}</h1>
        </div>
    </div>

    <br />

    <div class="row">
        <div class="col-sm-12">
            <form class="form-inline" role="form" ng-submit="query(query_qty, query_type, query_motive)" ng-if="user.can('add_transaction')">
                <select class="form-control" ng-model="query_type">
                    <option value="give" ng-if="user.can('add_givetransaction')">Faire un don</option>
                    <option value="punish" ng-if="user.can('add_punishtransaction')">Mettre une amende</option>
                    <option value="deposit" ng-if="user.can('add_deposittransaction')">Créditer le compte</option>
                </select>
                <input type="number" class="form-control number" ng-model="query_qty" select-on-click />
                <span ng-show="query_type == 'punish'">
                    <input type="text" class="form-control large" ng-model="query_motive" placeholder="Motif de l'amende" />
                    <input type="submit" class="btn btn-warning" value="Mettre une amende{{ query_qty > 0 && ' de ' + (query_qty | currency) || '' }}" ng-class="(query_qty <= 0) && 'disabled' || ''" />
                </span>
                <input ng-show="query_type != 'punish'" type="submit" class="btn btn-success" value="{{ query_type == 'give' && 'Donner' || 'Créditer' }} {{ query_qty > 0 && ' ' + (query_qty | currency) || '' }}" ng-class="query_qty <= 0 && 'disabled' || ''" />
            </form>
        </div>
    </div>

    <br />

    <div class="row">
        <div class="col-sm-12">
            <tabset>
                <tab heading="Infos">
                    <div class="row">
                        <table class="table table-tab">
                            <tbody>
                                <tr>
                                    <td class="h4">Solde</td>
                                    <td class="end-of-column text-right">
                                        <span class="h4"><span class="label" ng-class="account.money > 0 && 'label-success' || 'label-danger'">
                                            {{ account.money | currency }}
                                        </span></span>
                                    </td>
                                    <td class="h4 row">Rang</td>
                                    <td class="text-right">
                                        <span class="h4"><span class="badge">
                                            4
                                        </span></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="h4">Total dépensé</td>
                                    <td class="end-of-column text-right">
                                        <span class="h4"><span class="label label-default">
                                            {{ 1000 | currency}}
                                        </span></span>
                                    </td>
                                    <td class="h4 row">Amendes</td>
                                    <td class="text-right">
                                        <span class="h4"><span class="label label-danger">
                                            {{ 13 | currency }}
                                        </span></span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </tab>
                <tab heading="Graphiques">
                    <div class="row">
                        <div class="col-sm-12 text-center">
                            <div class="list-group">
                                <div class="list-group-item">
                                    <h1>ICI un BÔÔÔ GRAPHIQUE</h1>
                                </div>
                            </div>
                        </div>
                    </div>
                </tab>
                <tab heading="Modifier" ng-if="user.can('change_account')">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <fieldset>
                                <h3>Réinitialiser le mot de passe</h3>
                                <div class="alert alert-success alert-dismissible" role="alert" ng-if="pwdSuccess == 1">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Fermer"><span aria-hidden="true">&times;</span></button>
                                    Le mot de passe a bien été réinitialisé.
                                </div>
                                <div class="alert alert-danger alert-dismissible" role="alert" ng-if="pwdSuccess == -1">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Fermer"><span aria-hidden="true">&times;</span></button>
                                    Une erreur est survenue : le mot de passe n'a pas été réinitialisé...
                                </div>
                                <div>
                                    <div class="form-group">
                                        <div class="checkbox col-sm-offset-2 col-sm-10">
                                            <label>
                                                <input type="checkbox" ng-model="jaiCompris">
                                                J'ai bien compris que le mot de passe de <b>{{ account.owner.full_name }}</b> sera réinitialisé (génération aléatoire d'un nouveau mot de passe, transmis par mail).
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-sm-offset-2 col-sm-10">
                                        <a class="btn btn-warning" ng-click="resetPwd()" ng-class="!jaiCompris && 'disabled' || ''"><span class="glyphicon glyphicon-random"></span> Réinitialiser</a>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset>
                                <h3>Supprimer le compte</h3>
                                <div class="col-sm-10 col-sm-offset-2">
                                    <p>Un compte n'apparaîtra plus dans le bar, sauf pour les personnes possédant les droits de modifier les comptes.</p>
                                    <a class="btn btn-danger" ng-class="account.deleted && 'active'" ng-click="toggleDeleted()">
                                        <span class="glyphicon glyphicon-trash"></span> Supprimer
                                    </a>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </tab>
            </tabset>
        </div>
    </div>
    <bars:history filter="{account: account.id}"></bars:history>
</div>
